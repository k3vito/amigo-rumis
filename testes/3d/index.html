<html>

<head>
    <title>Gerador de receitas</title>
    <style>
    	#desenho{
    		text-align: center;
    		height: 500;
    	};
    	#editor{
    		padding: 5;
    		background-color: yellow;
    	};
    </style>
</head>

<body>
    <div id="desenho">
    </div>
    <div id="editor">
    	<h1>Editor</h1>
        <button id="adicionarCarreira">Adicionar carreira</button>
    </div>
    <div id="receita">
    	<h1>Receita</h1>
    </div>
    <script type="module">
        //Importar biblioteca three.js
        import * as THREE from "https://cdn.jsdelivr.net/npm/three@v0.119.1/build/three.module.js";
		import {OrbitControls} from "https://cdn.jsdelivr.net/npm/three@v0.119.1/examples/jsm/controls/OrbitControls.js";

		//Criar funções
		function iniciarRenderizador(){
			var renderer = new THREE.WebGLRenderer();
			renderer.setSize(window.innerWidth-20,window.innerHeight/2);
			document.getElementById("desenho").appendChild(renderer.domElement);
			return renderer;
		};

		function criarCena(){
			var scene = new THREE.Scene();
			scene.background = new THREE.Color( 0xeeeeee );
			var spotLight = new THREE.SpotLight(0xffffff);
			spotLight.position.set(-100, 100, 0);
			scene.add(spotLight);
			return scene;
		};

		function criarCamera(){
			var camera = new THREE.PerspectiveCamera(100,1,0.1,100);
			camera.position.set(0,1,5);
			return camera;
		};

		function criarControleCamera(renderer,camera){
			var controls = new OrbitControls(camera,renderer.domElement);
		};

		function criarCilindro(scene,radius,height) {
			var geometry = new THREE.CylinderGeometry(radius,radius,height,32);
			var material = new THREE.MeshLambertMaterial( {color: 0xffff00} );
			var cylinder = new THREE.Mesh(geometry, material);
			scene.add(cylinder);
		}

		var animar = function () {
			requestAnimationFrame(animar);
			renderizador.render(cena,camera);
		};

		//Iniciar gráficos
		var renderizador = iniciarRenderizador();

		var cena = criarCena();

		var camera = criarCamera();

		var controle = criarControleCamera(renderizador,camera);

		//Iniciar receita
		var carreira = 1;
		var pontoAltura = 0.1;
		var totalPontos = 1;

		//Criar cilindro
		document.getElementById("adicionarCarreira").addEventListener("click", function(){criarCilindro(cena,totalPontos,pontoAltura);carreira ++;});
		
		//Loop de animação
		animar();
	</script>
</body>

</html>